## Graphs for RCSP Generation

Define directed graphs $G^k=(V^k,A^k)$, $k\in K$. Let $V = \cup_{k \in K} V^k$ and $A=\cup_{k \in K} A^k$. The graphs are not necessarily simple and may even have loops. Vertices and arcs in all graphs are distinct. Each graph has special source and sink vertices: $v_{\mathrm{source}}^k$ and $v_{\mathrm{sink}}^k$. The source and sink may be distinct vertices, but may also be the same vertex. Define set $R^k$ of resources. For each $r \in R^k$ and $a \in A^k$, $q_{a,r} \in \mathbb{R}$ is the consumption of resource $r$ in arc $a$. Resources without any negative consumption are called * monotone}, otherwise they are *non-monotone*. Set $R^k$ is divided into *main resources* $R_M^k$ and *secondary resources* $R_N^k$. Main resources should be monotone. Moreover, there should not exist a cycle in $G^k$ with zero consumption of all main resources. Therefore, unless $G^k$ is acyclic, it is mandatory the existence of at least one main resource. As will be discussed in Section \ref{sec:implementation}, the concept of main resource is directly related to key implementation issues. Secondary resources may be monotone or non-monotone. Finally, resources are also classified as *disposable* or *non-disposable*. By default, resources are assumed to be disposable. The existence of non-disposable resources should be explicitly indicated. There are finite accumulated resource consumption intervals $[l_{a,r},u_{a,r}]$, $a\in A^k$. Since in most applications these intervals are more naturally defined on vertices, we may define intervals $[l_{v,r},u_{v,r}]$, $v \in V^k$, meaning that $[l_{a,r},u_{a,r}] = [l_{v,r},u_{v,r}]$ for every arc $a \in \delta^-(v)$ (i.e., entering $v$). 

A resource constrained path $p=(v_{\mathrm{source}}^k=v_0,a_1,v_1,\ldots,a_{n-1},v_{n-1},a_n,v_{n}=v_{\mathrm{sink}}^k)$ over a graph $G^k$ should have $n \geq 1$ arcs, $v_j \neq v_{\mathrm{source}}^k$ and $v_j \neq v_{\mathrm{sink}}^k$, $1\leq j\leq n-1$, and is feasible if: 

* for every $r \in R^k$ that is disposable, the accumulated resource consumption $S_{j,r}$ at visit $j$, $0\leq j\leq n$, where $S_{0,r}=0$ and $S_{j,r}=\max\{l_{a_j,r},S_{j-1,r}+q_{a_j,r}\}$, does not exceed $u_{a_j,r}$;
* for every $r \in R^k$ that is non-disposable, the accumulated resource consumption $S_{j,r}$ at visit $j$, $0\leq j\leq n$, where $S_{0,r}=0$ and $S_{j,r}= S_{j-1,r}+q_{a_j,r}$, lies in the interval $[l_{a_j,r},u_{a_j,r}]$.

Note that some feasible paths may not be elementary, some vertices or arcs being visited more than once. For each $k \in K$, let $P^k$ denote the set of all feasible resource constrained paths in $G^k$. Each set $P^k$ is finite, either because $G^k$ is acyclic or because the main resources limit the number of times that each vertex or arc can be visited. Define $P = \cup_{k \in K} P^k$. As vertices and arcs in different graphs are distinct, paths in different graphs are also distinct.
